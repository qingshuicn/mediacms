!function(){"use strict";var e,t={1826:function(e,t,r){var n=r(2985),s=r(9471),i=r(8713),a=r.n(i),l=r(8790),o=r(285),u=r(7664),c=r(2855),d=r(7460),g=r(5338),h=r(1838);const f={role:[{id:"all",title:(0,h.translateString)("All")},{id:"editor",title:(0,h.translateString)("Editor")},{id:"manager",title:(0,h.translateString)("Manager")}],approved:[{id:"all",title:(0,h.translateString)("All")},{id:"true",title:(0,h.translateString)("Yes")},{id:"false",title:(0,h.translateString)("No")}]};function m(e){const{userCan:t}=(0,g.useUser)(),[r,n]=(0,s.useState)(e.hidden),[i,a]=(0,s.useState)("all"),[l,o]=(0,s.useState)("all"),c=(0,s.useRef)(null),m=(0,s.useRef)(null);function p(){r||(c.current.style.height=24+m.current.offsetHeight+"px")}function v(t){const r={role:i,is_approved:l};switch(t.currentTarget.getAttribute("filter")){case"role":r.role=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(r),a(r.role);break;case"approved":r.is_approved=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(r),o(r.is_approved)}}return(0,s.useEffect)(()=>{n(e.hidden),p()},[e.hidden]),(0,s.useEffect)(()=>(d.PageStore.on("window_resize",p),()=>d.PageStore.removeListener("window_resize",p)),[]),s.createElement("div",{ref:c,className:"mi-filters-row"+(r?" hidden":"")},s.createElement("div",{ref:m,className:"mi-filters-row-inner"},s.createElement("div",{className:"mi-filter"},s.createElement("div",{className:"mi-filter-title"},(0,h.translateString)("ROLE")),s.createElement("div",{className:"mi-filter-options"},s.createElement(u.FilterOptions,{id:"role",options:f.role,selected:i,onSelect:v}))),t.usersNeedsToBeApproved?s.createElement("div",{className:"mi-filter"},s.createElement("div",{className:"mi-filter-title"},(0,h.translateString)("APPROVED")),s.createElement("div",{className:"mi-filter-options"},s.createElement(u.FilterOptions,{id:"approved",options:f.approved,selected:l,onSelect:v}))):null))}m.propTypes={hidden:a().bool},m.defaultProps={hidden:!1};var p=r(9835),v=r(9479);function C(e,t,r,n){return e+"?"+t+(""===t?"":"&")+r+(""===r?"":"&")+"page="+n}class S extends v.Y{constructor(e){super(e,"manage-users"),this.state={resultsCount:null,currentPage:1,requestUrl:l.ApiUrlContext._currentValue.manage.users,hiddenFilters:!0,filterArgs:"",sortingArgs:"",sortBy:"add_date",ordering:"desc",refresh:0},this.getCountFunc=this.getCountFunc.bind(this),this.onTablePageChange=this.onTablePageChange.bind(this),this.onToggleFiltersClick=this.onToggleFiltersClick.bind(this),this.onFiltersUpdate=this.onFiltersUpdate.bind(this),this.onColumnSortClick=this.onColumnSortClick.bind(this),this.onItemsRemoval=this.onItemsRemoval.bind(this),this.onItemsRemovalFail=this.onItemsRemovalFail.bind(this)}onTablePageChange(e,t){this.setState({currentPage:t,requestUrl:C(l.ApiUrlContext._currentValue.manage.users,this.state.filterArgs,this.state.sortingArgs,t)})}onToggleFiltersClick(){this.setState({hiddenFilters:!this.state.hiddenFilters})}getCountFunc(e){this.setState({resultsCount:e})}onFiltersUpdate(e){const t=[];for(let r in e)null!==e[r]&&"all"!==e[r]&&t.push(r+"="+e[r]);this.setState({filterArgs:t.join("&"),requestUrl:C(l.ApiUrlContext._currentValue.manage.users,t.join("&"),this.state.sortingArgs,this.state.currentPage)})}onColumnSortClick(e,t){const r="sort_by="+e+"&ordering="+t;this.setState({sortBy:e,ordering:t,sortingArgs:r,requestUrl:C(l.ApiUrlContext._currentValue.manage.users,this.state.filterArgs,r,this.state.currentPage)})}onItemsRemoval(e){this.setState({resultsCount:null,refresh:this.state.refresh+1,requestUrl:l.ApiUrlContext._currentValue.manage.users},function(){e?o.PageActions.addNotification((0,h.translateString)("The users deleted successfully."),"usersRemovalSucceed"):o.PageActions.addNotification((0,h.translateString)("The user deleted successfully."),"userRemovalSucceed")})}onItemsRemovalFail(e){e?o.PageActions.addNotification((0,h.translateString)("The users removal failed. Please try again."),"usersRemovalFailed"):o.PageActions.addNotification((0,h.translateString)("The user removal failed. Please try again."),"userRemovalFailed")}pageContent(){return[s.createElement(c.MediaListWrapper,{key:"2",title:this.props.title+(null===this.state.resultsCount?"":" ("+this.state.resultsCount+")")},s.createElement(u.FiltersToggleButton,{onClick:this.onToggleFiltersClick}),s.createElement(m,{hidden:this.state.hiddenFilters,onFiltersUpdate:this.onFiltersUpdate}),s.createElement(p.D,{pageItems:50,manageType:"users",key:this.state.requestUrl+"["+this.state.refresh+"]",itemsCountCallback:this.getCountFunc,requestUrl:this.state.requestUrl,onPageChange:this.onTablePageChange,sortBy:this.state.sortBy,ordering:this.state.ordering,onRowsDelete:this.onItemsRemoval,onRowsDeleteFail:this.onItemsRemovalFail,onClickColumnSort:this.onColumnSortClick}))]}}S.propTypes={title:a().string.isRequired},S.defaultProps={title:(0,h.translateString)("Manage users")},(0,n.C)("page-manage-users",S)}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.m=t,e=[],n.O=function(t,r,s,i){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],s=e[c][1],i=e[c][2];for(var l=!0,o=0;o<r.length;o++)(!1&i||a>=i)&&Object.keys(n.O).every(function(e){return n.O[e](r[o])})?r.splice(o--,1):(l=!1,i<a&&(a=i));if(l){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,s,i]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=101,function(){var e={101:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,a=r[0],l=r[1],o=r[2],u=0;if(a.some(function(t){return 0!==e[t]})){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(o)var c=o(n)}for(t&&t(r);u<a.length;u++)i=a[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var s=n.O(void 0,[276],function(){return n(1826)});s=n.O(s)}();